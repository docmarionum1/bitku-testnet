(this.webpackJsonpbitku=this.webpackJsonpbitku||[]).push([[0],{188:function(e,t){},190:function(e,t){},209:function(e,t,n){},211:function(e,t,n){},287:function(e,t,n){"use strict";n.r(t);var a=n(5);console.log(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_FLOW_NETWORK:"emulator",REACT_APP_ACCESS_NODE:"http://localhost:8080",REACT_APP_WALLET_DISCOVERY:"http://localhost:3001/fcl/authn"})),Object(a.e)().put("accessNode.api","http://localhost:8080").put("challenge.handshake","http://localhost:3001/fcl/authn");var r="",c="",i="0xf8d6e0586b0a20c7";Object(a.e)().put("0xFUNGIBLETOKENADDRESS","0xee82856bf20e2aa6").put("0xTOKENADDRESS","0x0ae53cb6e3f42a79").put("0xNONFUNGIBLETOKENADDRESS",i).put("0xHAIKUNFTADDRESS",i).put("0xFUSDADDRESS",i),r=i,c="http://localhost:3000/logo512.png";var o,u,s=n(0),l=n.n(s),p=n(15),b=n.n(p),d=(n(209),n(13)),f=n.n(d),h=n(170),j=n(23),O=n(25),x=(n(211),n(330)),k=n(178),g=n(321),m=n(331),v=n(337),S=n(334),F=n(323),N=n(332),w=n(86),D=n.n(w),y=n(115),T=n(40),E="\nimport HaikuNFT from 0xHAIKUNFTADDRESS\n\npub fun main(): {UInt64: UFix64} {\n\n    return {HaikuNFT.totalSupply: HaikuNFT.currentPrice()}\n}\n";function C(){return U.apply(this,arguments)}function U(){return(U=Object(j.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.m([a.l(E)]).then(a.g);case 2:return t=e.sent,n=Object.keys(t)[0],e.abrupt("return",{id:parseInt(n),price:t[n]});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A='\nimport HaikuNFT from 0xHAIKUNFTADDRESS\nimport NonFungibleToken from 0xNONFUNGIBLETOKENADDRESS\n\npub fun main(haikus: { UInt64: Address }): { UInt64: String } {\n  let response: {UInt64: String} = {}\n  for id in haikus.keys {\n    let address = haikus[id]!\n    let account = getAccount(address)\n    let capability = account.getCapability(HaikuNFT.HaikuCollectionPublicPath)\n    let ref = capability.borrow<&{HaikuNFT.HaikuCollectionPublic, NonFungibleToken.CollectionPublic}>() ?? panic("Could not borrow")\n    response[id] = ref.borrowHaiku(id: id).text\n  }\n\n  return response\n}\n';function H(e){return R.apply(this,arguments)}function R(){return(R=Object(j.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.m([a.l(A),a.b([a.a(t,T.b({key:T.d,value:T.a}))])]).then(a.g);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return B.apply(this,arguments)}function B(){return(B=Object(j.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.m([a.l(o||(o=Object(y.a)(['\n      import FungibleToken from 0xFUNGIBLETOKENADDRESS\n      import FUSD from 0xFUSDADDRESS\n      \n      pub fun main(account: Address): UFix64 {\n      \n          let vaultRef = getAccount(account)\n              .getCapability(/public/fusdBalance)\n              .borrow<&FUSD.Vault{FungibleToken.Balance}>()\n              ?? panic("Could not borrow Balance reference to the Vault")\n      \n          return vaultRef.balance\n      }\n    ']))),a.b([a.a(t.addr,T.a)])]).then(a.g);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return V.apply(this,arguments)}function V(){return(V=Object(j.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.m([a.l(u||(u=Object(y.a)(['\n      import HaikuNFT from 0xHAIKUNFTADDRESS\n      import NonFungibleToken from 0xNONFUNGIBLETOKENADDRESS\n      \n      pub fun main(address: Address): {UInt64: String} {\n        let account = getAccount(address)\n        let capability = account.getCapability(HaikuNFT.HaikuCollectionPublicPath)\n        let ref = capability.borrow<&{HaikuNFT.HaikuCollectionPublic, NonFungibleToken.CollectionPublic}>() ?? panic("Could not borrow")\n      \n        let haikus: {UInt64: String} = {}\n      \n        for id in ref.getIDs() {\n          let nft = ref.borrowNFT(id: id)\n          haikus[id] = ref.borrowHaiku(id: id).text\n        }\n      \n        return haikus\n      }\n    ']))),a.b([a.a(t.addr,T.a)])]).then(a.g);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L=n(4),_=l.a.createContext();function K(e){var t=e.children,n=Object(s.useState)(0),a=Object(O.a)(n,2),r=a[0],c=a[1],i=Object(s.useState)({}),o=Object(O.a)(i,2),u=o[0],l=o[1];return Object(L.jsx)(_.Provider,{value:{balance:r,setBalance:c,userHaikus:u,setUserHaikus:l},children:t})}function W(){var e=Object(s.useState)({loggedIn:null}),t=Object(O.a)(e,2),n=t[0],r=t[1],c=Object(s.useContext)(_),i=c.balance,o=c.setBalance,u=c.userHaikus,l=c.setUserHaikus;Object(s.useEffect)((function(){return a.f().subscribe(r)}),[]);var p=Object(s.useCallback)(Object(j.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I(n);case 3:t=e.sent,o(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),o(null);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[n]);return Object(s.useEffect)((function(){n.loggedIn?p():o(0)}),[n]),Object(s.useEffect)((function(){function e(){return(e=Object(j.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P(n);case 3:t=e.sent,l(t),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}n.loggedIn?function(){e.apply(this,arguments)}():l({})}),[n]),{user:n,balance:i,updateBalance:p,userHaikus:u,setUserHaikus:l}}var G=W,M=n(325),z=n(333),J=n(338),Y="\nimport FungibleToken from 0xFUNGIBLETOKENADDRESS\nimport FlowToken from 0xTOKENADDRESS\nimport FUSD from 0xFUSDADDRESS\nimport NonFungibleToken from 0xNONFUNGIBLETOKENADDRESS\n\nimport HaikuNFT from 0xHAIKUNFTADDRESS\n\ntransaction (haikuID: UInt64, price: UFix64) {\n    let collection: &NonFungibleToken.Collection\n    let sentVault: @FungibleToken.Vault\n    let receiverRef: &FlowToken.Vault{FungibleToken.Receiver}\n    \n    prepare(signer: AuthAccount) {\n        // if the account doesn't already have a collection\n        if signer.borrow<&HaikuNFT.Collection>(from: HaikuNFT.HaikuCollectionStoragePath) == nil {\n\n\n            // create a new empty collection\n            let collection <- HaikuNFT.createEmptyCollection()\n            \n            // save it to the account\n            signer.save(<-collection, to: HaikuNFT.HaikuCollectionStoragePath)\n\n            // create a public capability for the collection\n            signer.link<&{NonFungibleToken.CollectionPublic, HaikuNFT.HaikuCollectionPublic}>(HaikuNFT.HaikuCollectionPublicPath, target: HaikuNFT.HaikuCollectionStoragePath)\n        }\n\n        self.collection = signer.borrow<&NonFungibleToken.Collection>(from: HaikuNFT.HaikuCollectionStoragePath) \n             ?? panic(\"Could not borrow reference to NFT Collection!\")\n\n        // Get a reference to the signer's stored vault\n        let vaultRef = signer.borrow<&FUSD.Vault>(from: /storage/fusdVault)\n          ?? panic(\"Could not borrow reference to the owner's FUSD Vault!\")\n\n        // Get a reference to the signer's FLOW receiver to receive FLOW necessary to ensure they have\n        // enough storage\n        self.receiverRef =  signer\n          .getCapability(/public/flowTokenReceiver)\n          .borrow<&FlowToken.Vault{FungibleToken.Receiver}>()\n        ?? panic(\"Could not borrow receiver reference to the recipient's Vault\")\n\n        // Withdraw tokens from the signer's stored vault\n        self.sentVault <- vaultRef.withdraw(amount: price)\n    }\n\n    execute {\n        HaikuNFT.mintHaiku(recipient: self.collection, vault: <- self.sentVault, id: haikuID, flowReceiverRef: self.receiverRef)\n    }\n}\n";function q(e){return Q.apply(this,arguments)}function Q(){return(Q=Object(j.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.m([a.n(Y),a.b([a.a(t.id,T.d),a.a(t.price,T.c)]),a.j(a.d),a.k(a.d),a.c([a.d]),a.h(9999)]).then(a.g);case 2:return n=e.sent,e.abrupt("return",a.o(n).onceSealed());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var X="\nimport FungibleToken from 0xFUNGIBLETOKENADDRESS\nimport FUSD from 0xFUSDADDRESS\n\ntransaction {\n\n  prepare(signer: AuthAccount) {\n\n    // It's OK if the account already has a Vault, but we don't want to replace it\n    if(signer.borrow<&FUSD.Vault>(from: /storage/fusdVault) != nil) {\n      return\n    }\n    \n    // Create a new FUSD Vault and put it in storage\n    signer.save(<-FUSD.createEmptyVault(), to: /storage/fusdVault)\n\n    // Create a public capability to the Vault that only exposes\n    // the deposit function through the Receiver interface\n    signer.link<&FUSD.Vault{FungibleToken.Receiver}>(\n      /public/fusdReceiver,\n      target: /storage/fusdVault\n    )\n\n    // Create a public capability to the Vault that only exposes\n    // the balance field through the Balance interface\n    signer.link<&FUSD.Vault{FungibleToken.Balance}>(\n      /public/fusdBalance,\n      target: /storage/fusdVault\n    )\n  }\n}\n";function Z(){return $.apply(this,arguments)}function $(){return($=Object(j.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.m([a.n(X),a.j(a.d),a.k(a.d),a.c([a.d]),a.h(99)]).then(a.g);case 2:return t=e.sent,e.abrupt("return",a.o(t).onceSealed());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ee=Object(g.a)((function(e){return{root:{display:"flex",justifyContent:"space-between",padding:e.spacing(1)},button:{},about:{color:"black"}}}));var te=function(){var e=ee(),t=G(),n=t.user,r=t.balance,c=t.updateBalance,i=Object(s.useState)(null),o=Object(O.a)(i,2),u=o[0],p=o[1],b=function(){p(null)};return Object(L.jsxs)("div",{className:e.root,children:[Object(L.jsx)(F.a,{variant:"h5",children:Object(L.jsx)("a",{href:"https://github.com/docmarionum1/bitku#readme",target:"_blank",className:e.about,children:"About"})}),n.loggedIn?Object(L.jsxs)(l.a.Fragment,{children:[Object(L.jsx)("div",{children:Object(L.jsx)(M.a,{variant:"outlined",onClick:function(e){p(e.currentTarget)},children:n.addr})}),Object(L.jsxs)(z.a,{anchorEl:u,keepMounted:!0,open:!!u,onClose:b,children:[null===r?Object(L.jsx)(J.a,{onClick:Object(j.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(),e.next=3,Z();case 3:c();case 4:case"end":return e.stop()}}),e)}))),children:"Enable FUSD on this wallet"}):Object(L.jsxs)(J.a,{disabled:!0,children:[r," FUSD"]}),Object(L.jsx)(J.a,{onClick:function(){b(),a.p()},children:"Log Out"})]})]}):Object(L.jsx)("div",{children:Object(L.jsx)(M.a,{variant:"outlined",onClick:a.i,children:"Connect Wallet"})})]})},ne=n(92),ae=n(116),re=n(336),ce=n(176),ie=Object(g.a)((function(e){return{root:{height:"20rem",display:"flex",flexDirection:"column",justifyContent:"space-evenly"},popper:{top:"10px !important",zIndex:100},tooltip:{fontSize:"1rem",maxWidth:"none"},link:{color:"inherit"}}}));var oe=function(e){var t=e.setError,n=ie(),a=Object(s.useState)(null),r=Object(O.a)(a,2),i=r[0],o=r[1],u=Object(s.useState)(!0),p=Object(O.a)(u,2),b=p[0],d=p[1],h=Object(s.useState)(null),x=Object(O.a)(h,2),k=x[0],g=x[1],m=G(),v=m.user,S=m.balance,N=m.updateBalance,w=m.setUserHaikus,y=Object(s.useState)(null),T=Object(O.a)(y,2),E=T[0],U=T[1];Object(s.useEffect)((function(){function e(){return(e=Object(j.a)(f.a.mark((function e(){var t,n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api-instant.ramp.network/api/host-api/assets");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,a=n.assets.filter((function(e){return"FLOW_FUSD"==e.symbol}))[0],U(a.priceEur*a.minPurchaseAmountEur);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(s.useEffect)((function(){function e(){return(e=Object(j.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.t0=o,e.next=4,C();case 4:e.t1=e.sent,(0,e.t0)(e.t1),d(!1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}null===i&&function(){e.apply(this,arguments)}()}),[i]),Object(s.useEffect)((function(){v.loggedIn||g(null)}),[v]);var A=Object(s.useCallback)(Object(j.a)(f.a.mark((function e(){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.prev=1,e.next=4,q(i);case 4:return window.scrollTo(0,0),e.next=7,H({key:i.id,value:v.addr});case 7:n=e.sent,a=n[Object.keys(n)[0]],g({id:i.id,text:a}),w((function(e){return Object(ae.a)(Object(ae.a)({},e),{},Object(ne.a)({},i.id,a))})),o(null),N(),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),"Declined: Externally Halted"!==e.t0&&t(e.t0),o(null);case 19:case"end":return e.stop()}}),e,null,[[1,15]])}))),[v,i]);if(b)return Object(L.jsxs)("div",{className:"spinner",id:"spinner",children:[Object(L.jsx)("div",{className:"double-bounce1"}),Object(L.jsx)("div",{className:"double-bounce2"})]});var R=!v.loggedIn||null===i||null===S||S<i.price,I="Mint Bitku #".concat(i.id," for ").concat(i.price," FUSD");return v.loggedIn?null===S?I="To mint a Bitku, please enable FUSD for your wallet using the menu in the top right":S<i.price?I=Object(L.jsxs)("span",{children:["You don't have enough FUSD.\xa0",E&&Object(L.jsxs)(l.a.Fragment,{children:[Object(L.jsxs)("a",{href:"#",className:n.link,onClick:function(){new ce.a({hostAppName:"Bitku",hostLogoUrl:c,swapAmount:Math.ceil(Math.max(i.price-S,E)*Math.pow(10,8)),swapAsset:"FLOW_FUSD",userAddress:v.addr,fiatCurrency:"EUR"}).show()},children:["Buy ",Math.max(i.price-S,E).toFixed(2)," FUSD"]}),"."]})]}):null===i&&(I="No Bitkus remaining"):I="To mint a Bitku, please connect your wallet using the menu in the top right",Object(L.jsxs)("div",{className:n.root,children:[k&&Object(L.jsxs)("div",{children:[Object(L.jsx)(F.a,{variant:"h6",children:k.id}),Object(L.jsx)(F.a,{variant:"body2",children:Object(L.jsx)(D.a,{typing:1,fixed:!0,children:k.text})})]}),Object(L.jsx)("div",{children:Object(L.jsx)(re.a,{interactive:!0,classes:{popper:n.popper,tooltip:n.tooltip},title:I,open:R,placement:"bottom",arrow:!0,children:Object(L.jsx)("span",{children:Object(L.jsxs)(M.a,{variant:"outlined",disabled:R,onClick:A,children:["Mint Bitku #",i.id,"/1024 (",i.price," FUSD)"]})})})})]})},ue=n(327),se=n(328),le=n(329),pe=Object(g.a)((function(e){return{root:{marginBottom:e.spacing(4)},paper:{padding:e.spacing(2),borderRadius:e.spacing(.5),height:"12em",display:"flex",flexDirection:"column"},skeletonContainer:{display:"flex",flexDirection:"column",flexGrow:1,justifyContent:"center"},skeleton:{margin:"auto"}}}));var be=function(e){var t=e.haikus,n=e.heading,a=e.order,r=pe(),c=a||Object.keys(t);return Object(L.jsxs)("div",{className:r.root,children:[Object(L.jsx)(F.a,{variant:"h4",children:n}),Object(L.jsx)(se.a,{container:!0,spacing:3,children:t&&c.map((function(e){return Object(L.jsx)(se.a,{item:!0,xs:12,sm:6,md:6,lg:4,children:Object(L.jsxs)(ue.a,{elevation:3,className:r.paper,children:[Object(L.jsx)(F.a,{variant:"h6",children:e}),t[e]?Object(L.jsx)(F.a,{variant:"body2",children:t[e]}):Object(L.jsx)("div",{className:r.skeletonContainer,children:Object(L.jsxs)("div",{children:[Object(L.jsx)(le.a,{variant:"text",animation:"wave",width:"40%",className:r.skeleton}),Object(L.jsx)(le.a,{variant:"text",animation:"wave",width:"56%",className:r.skeleton}),Object(L.jsx)(le.a,{variant:"text",animation:"wave",width:"40%",className:r.skeleton})]})})]})},e)}))})]})},de=Object(k.a)({typography:{fontFamily:['"Courier New"',"courier","monospace"].join(","),h6:{textAlign:"center",textDecoration:"underline",fontSize:"1rem",fontWeight:"bold"},h4:{marginBottom:"1rem",textDecoration:"underline"},body2:{textAlign:"center",whiteSpace:"pre",flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"center"}},shape:{borderRadius:32}}),fe=Object(g.a)((function(e){return{root:{textAlign:"center"}}}));var he=function(){var e=fe(),t=Object(s.useState)(null),n=Object(O.a)(t,2),a=n[0],c=n[1],i=Object(s.useState)(!1),o=Object(O.a)(i,2),u=o[0],p=o[1],b=Object(s.useState)(!1),d=Object(O.a)(b,2),k=d[0],g=d[1],w=W().userHaikus,y=r,T=[40,29,0,4,5,28,41,62],E=Object(s.useState)({}),C=Object(O.a)(E,2),U=C[0],A=C[1],R=function(){return p(!1)};return Object(s.useEffect)((function(){null!==a&&p(!0)}),[a]),Object(s.useEffect)((function(){function e(){return(e=Object(j.a)(f.a.mark((function e(){var t,n,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=Object(h.a)(T);try{for(n.s();!(a=n.n()).done;)r=a.value,t.push({key:r,value:y})}catch(c){n.e(c)}finally{n.f()}return e.t0=A,e.next=6,H(t);case 6:e.t1=e.sent,(0,e.t0)(e.t1);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(L.jsxs)(l.a.Fragment,{children:[Object(L.jsx)(x.a,{}),Object(L.jsx)(m.a,{theme:de,children:Object(L.jsxs)("div",{className:e.root,children:[Object(L.jsx)(te,{}),Object(L.jsxs)(N.a,{children:[Object(L.jsx)(F.a,{variant:"h1",children:Object(L.jsx)(D.a,{typing:1,onTypingEnd:function(){return g(!0)},children:"Bitku"})}),k&&Object(L.jsxs)(l.a.Fragment,{children:[Object(L.jsx)(oe,{setError:c}),Object(L.jsx)(be,{haikus:U,order:T,heading:"Featured"}),Object(L.jsx)(be,{haikus:w,heading:"My Bitku"})]}),Object(L.jsx)(v.a,{open:u,autoHideDuration:1e4,onClose:R,children:Object(L.jsx)(S.a,{onClose:R,severity:"error",children:a})})]})]})})]})},je=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,339)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};b.a.render(Object(L.jsx)(l.a.StrictMode,{children:Object(L.jsx)(K,{children:Object(L.jsx)(he,{})})}),document.getElementById("root")),je()}},[[287,1,2]]]);
//# sourceMappingURL=main.57d69777.chunk.js.map