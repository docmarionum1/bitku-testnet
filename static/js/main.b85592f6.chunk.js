(this.webpackJsonpbitku=this.webpackJsonpbitku||[]).push([[0],{184:function(e,t){},186:function(e,t){},205:function(e,t,n){},207:function(e,t,n){},283:function(e,t,n){"use strict";n.r(t);var a=n(7);console.log(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_FLOW_NETWORK:"testnet",REACT_APP_ACCESS_NODE:"https://access-testnet.onflow.org",REACT_APP_WALLET_DISCOVERY:"https://fcl-discovery.onflow.org/testnet/authn"})),Object(a.e)().put("accessNode.api","https://access-testnet.onflow.org").put("challenge.handshake","https://fcl-discovery.onflow.org/testnet/authn");var r="",c="0x15032505846acdad";Object(a.e)().put("0xFUNGIBLETOKENADDRESS","0x9a0766d93b6608b7").put("0xTOKENADDRESS","0x7e60df042a9c0868").put("0xNONFUNGIBLETOKENADDRESS","0x631e88ae7f1d7c20").put("0xHAIKUNFTADDRESS",c),r=c;var i,o,s=n(0),u=n.n(s),l=n(15),b=n.n(l),d=(n(205),n(16)),p=n.n(d),f=n(168),j=n(26),h=n(28),O=(n(207),n(324)),x=n(174),k=n(316),g=n(325),m=n(330),v=n(328),N=n(318),w=n(326),T=n(83),y=n.n(T),S=n(114),E=n(32),F="\nimport HaikuNFT from 0xHAIKUNFTADDRESS\n\npub fun main(): {UInt64: UFix64} {\n\n    return {HaikuNFT.totalSupply: HaikuNFT.currentPrice()}\n}\n";function C(){return D.apply(this,arguments)}function D(){return(D=Object(j.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.m([a.l(F)]).then(a.g);case 2:return t=e.sent,n=Object.keys(t)[0],e.abrupt("return",{id:parseInt(n),price:t[n]});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A='\nimport HaikuNFT from 0xHAIKUNFTADDRESS\nimport NonFungibleToken from 0xNONFUNGIBLETOKENADDRESS\n\npub fun main(haikus: { UInt64: Address }): { UInt64: String } {\n  let response: {UInt64: String} = {}\n  for id in haikus.keys {\n    let address = haikus[id]!\n    let account = getAccount(address)\n    let capability = account.getCapability(/public/HaikuCollection)\n    let ref = capability.borrow<&{HaikuNFT.HaikuCollectionPublic, NonFungibleToken.CollectionPublic}>() ?? panic("Could not borrow")\n    response[id] = ref.borrowHaiku(id: id).text\n  }\n\n  //return ref.borrowHaiku(id: id).text\n  return response\n}\n';function H(e){return I.apply(this,arguments)}function I(){return(I=Object(j.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.m([a.l(A),a.b([a.a(t,E.Dictionary({key:E.UInt64,value:E.Address}))])]).then(a.g);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return R.apply(this,arguments)}function R(){return(R=Object(j.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.m([a.l(i||(i=Object(S.a)(['\n      import FungibleToken from 0xFUNGIBLETOKENADDRESS\n      import FlowToken from 0xTOKENADDRESS\n      \n      pub fun main(account: Address): UFix64 {\n      \n          let vaultRef = getAccount(account)\n              .getCapability(/public/flowTokenBalance)\n              .borrow<&FlowToken.Vault{FungibleToken.Balance}>()\n              ?? panic("Could not borrow Balance reference to the Vault")\n      \n          return vaultRef.balance\n          \n          \n          //return getAccount(account).balance\n      }\n    ']))),a.b([a.a(t.addr,E.Address)])]).then(a.g);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){return K.apply(this,arguments)}function K(){return(K=Object(j.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.m([a.l(o||(o=Object(S.a)(['\n      import HaikuNFT from 0xHAIKUNFTADDRESS\n      import NonFungibleToken from 0xNONFUNGIBLETOKENADDRESS\n      \n      pub fun main(address: Address): {UInt64: String} {\n        let account = getAccount(address)\n        let capability = account.getCapability(/public/HaikuCollection)\n        let ref = capability.borrow<&{HaikuNFT.HaikuCollectionPublic, NonFungibleToken.CollectionPublic}>() ?? panic("Could not borrow")\n      \n        let haikus: {UInt64: String} = {}\n      \n        for id in ref.getIDs() {\n          let nft = ref.borrowNFT(id: id)\n          haikus[id] = ref.borrowHaiku(id: id).text\n        }\n      \n        return haikus\n      }\n    ']))),a.b([a.a(t.addr,E.Address)])]).then(a.g);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P=n(2),_=u.a.createContext();function L(e){var t=e.children,n=Object(s.useState)(0),a=Object(h.a)(n,2),r=a[0],c=a[1],i=Object(s.useState)({}),o=Object(h.a)(i,2),u=o[0],l=o[1];return Object(P.jsx)(_.Provider,{value:{balance:r,setBalance:c,userHaikus:u,setUserHaikus:l},children:t})}function V(){var e=Object(s.useState)({loggedIn:null}),t=Object(h.a)(e,2),n=t[0],r=t[1],c=Object(s.useContext)(_),i=c.balance,o=c.setBalance,u=c.userHaikus,l=c.setUserHaikus;Object(s.useEffect)((function(){return a.f().subscribe(r)}),[]);var b=Object(s.useCallback)(Object(j.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(n);case 2:t=e.sent,o(t);case 4:case"end":return e.stop()}}),e)}))),[n]);return Object(s.useEffect)((function(){n.loggedIn?b():o(0)}),[n]),Object(s.useEffect)((function(){function e(){return(e=Object(j.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B(n);case 3:t=e.sent,l(t),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}n.loggedIn?function(){e.apply(this,arguments)}():l({})}),[n]),{user:n,balance:i,updateBalance:b,userHaikus:u,setUserHaikus:l}}var W=V,G=n(320),M=n(327),J=n(331),z=Object(k.a)((function(e){return{root:{display:"flex",justifyContent:"space-between",padding:e.spacing(1)},button:{},about:{color:"black"}}}));var Y=function(){var e=z(),t=W(),n=t.user,r=t.balance,c=Object(s.useState)(null),i=Object(h.a)(c,2),o=i[0],l=i[1],b=function(){l(null)};return Object(P.jsxs)("div",{className:e.root,children:[Object(P.jsx)(N.a,{variant:"h5",children:Object(P.jsx)("a",{href:"https://github.com/docmarionum1/bitku#readme",target:"_blank",className:e.about,children:"About"})}),n.loggedIn?Object(P.jsxs)(u.a.Fragment,{children:[Object(P.jsx)("div",{children:Object(P.jsx)(G.a,{variant:"outlined",onClick:function(e){l(e.currentTarget)},children:n.addr})}),Object(P.jsxs)(M.a,{anchorEl:o,keepMounted:!0,open:!!o,onClose:b,children:[Object(P.jsxs)(J.a,{disabled:!0,children:["\u20a3",r," FLOW"]}),Object(P.jsx)(J.a,{onClick:function(){b(),a.p()},children:"Log Out"})]})]}):Object(P.jsx)("div",{children:Object(P.jsx)(G.a,{variant:"outlined",onClick:a.i,children:"Connect Wallet"})})]})},q=n(89),Q=n(115),X="\nimport FungibleToken from 0xFUNGIBLETOKENADDRESS\nimport FlowToken from 0xTOKENADDRESS\nimport NonFungibleToken from 0xNONFUNGIBLETOKENADDRESS\n\nimport HaikuNFT from 0xHAIKUNFTADDRESS\n\ntransaction (haikuID: UInt64, price: UFix64) {\n    let collection: &NonFungibleToken.Collection\n    let sentVault: @FungibleToken.Vault\n    \n    prepare(signer: AuthAccount) {\n        // if the account doesn't already have a collection\n        if signer.borrow<&HaikuNFT.Collection>(from: /storage/HaikuCollection) == nil {\n\n\n            // create a new empty collection\n            let collection <- HaikuNFT.createEmptyCollection()\n            \n            // save it to the account\n            signer.save(<-collection, to: /storage/HaikuCollection)\n\n            // create a public capability for the collection\n            signer.link<&{NonFungibleToken.CollectionPublic, HaikuNFT.HaikuCollectionPublic}>(/public/HaikuCollection, target: /storage/HaikuCollection)\n        }\n\n        self.collection = signer.borrow<&NonFungibleToken.Collection>(from: /storage/HaikuCollection) \n             ?? panic(\"Could not borrow reference to NFT Collection!\")\n\n        // Get a reference to the signer's stored vault\n        let vaultRef = signer.borrow<&FlowToken.Vault>(from: /storage/flowTokenVault)\n          ?? panic(\"Could not borrow reference to the owner's Vault!\")\n\n        // Withdraw tokens from the signer's stored vault\n        self.sentVault <- vaultRef.withdraw(amount: price)\n    }\n\n    execute {\n        HaikuNFT.mintHaiku(recipient: self.collection, vault: <- self.sentVault, id: haikuID)\n    }\n}\n";function Z(e){return $.apply(this,arguments)}function $(){return($=Object(j.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.m([a.n(X),a.b([a.a(t.id,E.UInt64),a.a(t.price,E.UFix64)]),a.j(a.d),a.k(a.d),a.c([a.d]),a.h(9999)]).then(a.g);case 2:return n=e.sent,e.abrupt("return",a.o(n).onceSealed());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ee=Object(k.a)((function(e){return{root:{height:"20rem",display:"flex",flexDirection:"column",justifyContent:"space-evenly"}}}));var te=function(e){var t=e.setError,n=ee(),a=Object(s.useState)(null),r=Object(h.a)(a,2),c=r[0],i=r[1],o=Object(s.useState)(!0),u=Object(h.a)(o,2),l=u[0],b=u[1],d=Object(s.useState)(null),f=Object(h.a)(d,2),O=f[0],x=f[1],k=W(),g=k.user,m=k.updateBalance,v=k.setUserHaikus;Object(s.useEffect)((function(){function e(){return(e=Object(j.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.t0=i,e.next=4,C();case 4:e.t1=e.sent,(0,e.t0)(e.t1),b(!1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}null===c&&function(){e.apply(this,arguments)}()}),[c]),Object(s.useEffect)((function(){g.loggedIn||x(null)}),[g]);var w=Object(s.useCallback)(Object(j.a)(p.a.mark((function e(){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.prev=1,e.next=4,Z(c);case 4:return window.scrollTo(0,0),e.next=7,H({key:c.id,value:g.addr});case 7:n=e.sent,a=n[Object.keys(n)[0]],x({id:c.id,text:a}),v((function(e){return Object(Q.a)(Object(Q.a)({},e),{},Object(q.a)({},c.id,a))})),i(null),m(),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),"Declined: Externally Halted"!==e.t0&&t(e.t0),i(null);case 19:case"end":return e.stop()}}),e,null,[[1,15]])}))),[g,c]);return l?Object(P.jsxs)("div",{className:"spinner",id:"spinner",children:[Object(P.jsx)("div",{className:"double-bounce1"}),Object(P.jsx)("div",{className:"double-bounce2"})]}):Object(P.jsxs)("div",{className:n.root,children:[O&&Object(P.jsxs)("div",{children:[Object(P.jsx)(N.a,{variant:"h6",children:O.id}),Object(P.jsx)(N.a,{variant:"body2",children:Object(P.jsx)(y.a,{typing:1,fixed:!0,children:O.text})})]}),Object(P.jsx)("div",{children:Object(P.jsxs)(G.a,{variant:"outlined",disabled:!g.loggedIn||null===c,onClick:w,children:["Mint Bitku #",c.id,"/1024 (\u20a3",c.price," FLOW)"]})})]})},ne=n(321),ae=n(322),re=n(323),ce=Object(k.a)((function(e){return{root:{marginBottom:e.spacing(4)},paper:{padding:e.spacing(2),borderRadius:e.spacing(.5),height:"12em",display:"flex",flexDirection:"column"},skeletonContainer:{display:"flex",flexDirection:"column",flexGrow:1,justifyContent:"center"},skeleton:{margin:"auto"}}}));var ie=function(e){var t=e.haikus,n=e.heading,a=e.order,r=ce(),c=a||Object.keys(t);return Object(P.jsxs)("div",{className:r.root,children:[Object(P.jsx)(N.a,{variant:"h4",children:n}),Object(P.jsx)(ae.a,{container:!0,spacing:3,children:t&&c.map((function(e){return Object(P.jsx)(ae.a,{item:!0,xs:12,sm:6,md:6,lg:4,children:Object(P.jsxs)(ne.a,{elevation:3,className:r.paper,children:[Object(P.jsx)(N.a,{variant:"h6",children:e}),t[e]?Object(P.jsx)(N.a,{variant:"body2",children:t[e]}):Object(P.jsx)("div",{className:r.skeletonContainer,children:Object(P.jsxs)("div",{children:[Object(P.jsx)(re.a,{variant:"text",animation:"wave",width:"40%",className:r.skeleton}),Object(P.jsx)(re.a,{variant:"text",animation:"wave",width:"56%",className:r.skeleton}),Object(P.jsx)(re.a,{variant:"text",animation:"wave",width:"40%",className:r.skeleton})]})})]})},e)}))})]})},oe=Object(x.a)({typography:{fontFamily:['"Courier New"',"courier","monospace"].join(","),h6:{textAlign:"center",textDecoration:"underline",fontSize:"1rem",fontWeight:"bold"},h4:{marginBottom:"1rem",textDecoration:"underline"},body2:{textAlign:"center",whiteSpace:"pre",flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"center"}},shape:{borderRadius:32}}),se=Object(k.a)((function(e){return{root:{textAlign:"center"}}}));var ue=function(){var e=se(),t=Object(s.useState)(null),n=Object(h.a)(t,2),a=n[0],c=n[1],i=Object(s.useState)(!1),o=Object(h.a)(i,2),l=o[0],b=o[1],d=Object(s.useState)(!1),x=Object(h.a)(d,2),k=x[0],T=x[1],S=V().userHaikus,E=r,F=[40,29,0,4,5,28,41,62],C=Object(s.useState)({}),D=Object(h.a)(C,2),A=D[0],I=D[1],U=function(){return b(!1)};return Object(s.useEffect)((function(){null!==a&&b(!0)}),[a]),Object(s.useEffect)((function(){function e(){return(e=Object(j.a)(p.a.mark((function e(){var t,n,a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=Object(f.a)(F);try{for(n.s();!(a=n.n()).done;)r=a.value,t.push({key:r,value:E})}catch(c){n.e(c)}finally{n.f()}return e.t0=I,e.next=6,H(t);case 6:e.t1=e.sent,(0,e.t0)(e.t1);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(P.jsxs)(u.a.Fragment,{children:[Object(P.jsx)(O.a,{}),Object(P.jsx)(g.a,{theme:oe,children:Object(P.jsxs)("div",{className:e.root,children:[Object(P.jsx)(Y,{}),Object(P.jsxs)(w.a,{children:[Object(P.jsx)(N.a,{variant:"h1",children:Object(P.jsx)(y.a,{typing:1,onTypingEnd:function(){return T(!0)},children:"Bitku"})}),k&&Object(P.jsxs)(u.a.Fragment,{children:[Object(P.jsx)(te,{setError:c}),Object(P.jsx)(ie,{haikus:A,order:F,heading:"Featured"}),Object(P.jsx)(ie,{haikus:S,heading:"My Bitku"})]}),Object(P.jsx)(m.a,{open:l,autoHideDuration:1e4,onClose:U,children:Object(P.jsx)(v.a,{onClose:U,severity:"error",children:a})})]})]})})]})},le=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,332)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};b.a.render(Object(P.jsx)(u.a.StrictMode,{children:Object(P.jsx)(L,{children:Object(P.jsx)(ue,{})})}),document.getElementById("root")),le()}},[[283,1,2]]]);
//# sourceMappingURL=main.b85592f6.chunk.js.map